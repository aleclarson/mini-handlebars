!function(e,a){return"function"===typeof require&&typeof exports===typeof module?module.exports=a:e.MiniHandlebars=a}(this,function(){var e;e=function(a,d){this.options=null!=a?a:{};this.templates=null!=d?d:{}};e.prototype.render=function(a,d){var b,j,g,k,c,f;j=1;c=[];k={};d=e._extend(this.options.locals,d);a.replace(/\{\{(\/\w+|\w+)( [\w, ]+)?\}\}\s*/g,function(b,a,d,e){var f,h,g,l;h="/"===a[0];a={match:b,name:l=h?a.slice(1):a,block:f="string"===typeof d,args:f&&d.replace(/(^ +| +$)/,"").split(/, */)||
[],variable:f===h,level:g=f===h&&j||f&&j++||h&&--j,key:g+"."+l,position:e};if(1!==g)return b;h&&(c[k[a.key]].mate=a);if(a.variable||a.block)k[a.key]=c.push(a)-1;return b});f=0;for(b in c)1===c[b].level&&(g=function(d,e){a=a.substr(0,c[b].position+f)+e+a.substr(c[b].position+d+f);f+=e.length-d},c[b].variable?g(c[b].match.length,d[c[b].name]):c[b].block&&g(c[b].mate.position+(c[b].mate.match.length-c[b].position),d[c[b].name].apply(function(){},[a.substr(c[b].position+c[b].match.length+f,c[b].mate.position-
(c[b].position+c[b].match.length)),d].concat(c[b].args))));return a};e._extend=function(){var a,d,b,e;b={};a=arguments;for(e in a)for(d in a[e])({}).hasOwnProperty.call(a[e],d)&&(b[d]=a[e][d]);return b};return e}());
